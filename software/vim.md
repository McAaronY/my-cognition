# vim 使用

## 安装

1. linux

- Ubuntu 安装

```bash
    sudo apt update
    sudo apt install vim
```

- Centos 安装

```bash
  sudo yum y install vim
```

## Vim 核心模式及操作

### 1. 普通模式（Normal Mode）

- **进入方式**：启动 Vim 后默认模式，其他模式按 `Esc` 返回
- **主要功能**：光标移动、执行命令、文本操作

#### 光标移动

- 基础方向：`h`（左）、`j`（下）、`k`（上）、`l`（右）
- 行首行尾：`0`（行首）、`$`（行尾）、`^`（行首非空字符）
- 文档跳转：`gg`（文档开头）、`G`（文档结尾）、`nG`（第 n 行）
- 单词移动：`w`（下词首）、`e`（当前词尾）、`b`（上词首）
- 页移动：`Ctrl+f`（下翻页）、`Ctrl+b`（上翻页）、`Ctrl+d`（下翻半页）、`Ctrl+u`（上翻半页）

#### 编辑操作

- 删除：`x`（删当前字符）、`dd`（删当前行）、`dw`（删至词尾）、`d$`（删至行尾）
- 复制粘贴：`yy`（复制行）、`p`（粘贴至后）、`P`（粘贴至前）
- 撤销重做：`u`（撤销）、`Ctrl+r`（重做）
- 替换：`r`（替换单个字符）、`R`（连续替换）

### 2. 插入模式（Insert Mode）

- **进入方式**（从普通模式）：
  - `i`：光标前插入
  - `I`：行首插入
  - `a`：光标后插入
  - `A`：行尾插入
  - `o`：下行插入新行
  - `O`：上行插入新行
- **退出方式**：按 `Esc` 返回普通模式

### 3. 可视模式（Visual Mode）

- **进入方式**：
  - `v`：字符选择模式
  - `V`：行选择模式
  - `Ctrl+v`：块选择模式
- **常用操作**：
  - `d`：删除选中内容
  - `y`：复制选中内容
  - `>`/`<`：缩进/反缩进
  - `u`/`U`：转为小写/大写

### 4. 命令行模式（Command-line Mode）

- **进入方式**：普通模式下按 `:`、`/` 或 `?`
- **常用命令**：
  - 文件操作：`:w`（保存）、`:q`（退出）、`:wq`（保存退出）、`:q!`（强制退出）
  - 搜索替换：`/pattern`（向下搜索）、`:s/old/new/g`（替换）、`:%s/old/new/gc`（全局替换确认）
  - 显示设置：`:set nu`（显示行号）、`:set hlsearch`（搜索高亮）

## 二、Linux 终端常用快捷键

### 1. 终端操作

- `Ctrl+c`：终止当前命令
- `Ctrl+d`：退出当前终端/结束输入
- `Ctrl+z`：暂停当前进程（可用 `fg` 恢复）
- `Ctrl+l`：清屏（等同于 `clear` 命令）
- `Ctrl+s`：暂停终端输出
- `Ctrl+q`：恢复终端输出

### 2. 命令行编辑

- `Ctrl+a`：光标移至行首
- `Ctrl+e`：光标移至行尾
- `Ctrl+左/右箭头`：按单词移动光标
- `Ctrl+u`：删除从光标到行首的内容
- `Ctrl+k`：删除从光标到行尾的内容
- `Ctrl+w`：删除光标前的一个单词
- `Ctrl+y`：粘贴被删除的内容
- `Ctrl+r`：搜索历史命令（输入关键词匹配）

### 3. 历史命令

- `history`：查看命令历史
- `!n`：执行历史中第 n 条命令
- `!!`：执行上一条命令
- `!keyword`：执行最近一条以 keyword 开头的命令
- `Up/Down`：上下切换历史命令

## 三、Vim 与 Linux 协同技巧

1. **在 Vim 中执行 shell 命令**：

   - 命令模式下输入 `:!命令`（如 `:!ls` 查看目录）
   - `:r !命令` 将命令输出插入到当前文档（如 `:r !date` 插入当前时间）

2. **快速打开文件**：

   - 终端中：`vim +n 文件名` 直接打开文件并跳至第 n 行
   - Vim 中：`:e 文件名` 打开新文件，`:sp 文件名` 水平分屏打开

3. **复制粘贴互通**：
   - Vim 中复制到系统剪贴板：`"+y`
   - 粘贴系统剪贴板内容到 Vim：`"+p`
